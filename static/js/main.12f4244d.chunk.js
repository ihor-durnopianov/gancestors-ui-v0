(this.webpackJsonpancestors=this.webpackJsonpancestors||[]).push([[0],{50:function(e,t,a){e.exports=a(79)},55:function(e,t,a){},73:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),c=a.n(i),l=(a(55),a(18)),o=a(19),s=a(23),m=a(22),d=a(108),u=a(37),h=a.n(u),p=(a(73),a(25)),g=a(111),f=a(107),v=a(110),E=a(109);a(106);var y=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.image&&r.a.createElement("img",{src:e.image,alt:""})),r.a.createElement(E.a,{variant:"contained",component:"label",color:"primary",style:{display:e.image?"none":"inline",borderRadius:"1.5em",top:"32.5vh",padding:".85em",paddingLeft:"1.25em",paddingRight:"1.25em",fontSize:".9em"}},r.a.createElement("i",{className:"fas fa-arrow-up",style:{paddingRight:".5em",fontSize:"1.125em"}}),"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u043e\u0442\u043e",r.a.createElement("input",{type:"file",style:{display:"none"},onInput:function(t){var a;e.setImage((a=t.target.files[0],window.URL.createObjectURL(a)))}})))},w=a(24),b=a.n(w),C=a(42),S=a(43),F=a.n(S),x=(a(78),function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={src:null,crop:{unit:"px",width:128,aspect:1}},e.onSelectFile=function(t){if(t.target.files&&t.target.files.length>0){var a=new FileReader;a.addEventListener("load",(function(){return e.setState({src:a.result})})),a.readAsDataURL(t.target.files[0])}},e.onImageLoaded=function(t){e.imageRef=t},e.onCropComplete=function(t){e.makeClientCrop(t)},e.onCropChange=function(t,a){e.setState({crop:t})},e}return Object(o.a)(a,[{key:"makeClientCrop",value:function(){var e=Object(C.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=6;break}return e.next=3,this.getCroppedImg(this.imageRef,t);case 3:a=e.sent,this.setState({croppedImageUrl:a}),this.props.setCropped(a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=document.createElement("canvas"),r=e.naturalWidth/e.width,i=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*r,t.y*i,t.width*r,t.height*i,0,0,t.width,t.height),new Promise((function(e,t){e(n.toDataURL())}))}},{key:"render",value:function(){var e=this.state.crop,t=this.props.image;return r.a.createElement("div",{id:"selector",style:{minHeight:"75vh"}},t&&r.a.createElement(F.a,{src:t,crop:e,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange}))}}]),a}(n.PureComponent)),j=a(104),I=a(105),R=a(103),k=Object(R.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));var O=function(e){var t=k();return r.a.createElement("div",{id:"enhancer"},r.a.createElement(j.a,{container:!0,spacing:0,justify:"space-evenly",style:{height:"".concat(function(){var e=document.getElementById("selector");return null!==e?e.clientHeight:document.getElementById("enhancer").clientHeight}(),"px"),maxHeight:"75vh"}},r.a.createElement(j.a,{item:!0,xs:5,style:{}},r.a.createElement("div",{style:{marginTop:"15%"}},r.a.createElement("img",{style:{maxWidth:"100%",minWidth:"75%",objectFit:"fill",position:"relative",top:"50%"},src:e.cropped,alt:""}))),r.a.createElement(j.a,{item:!0,xs:1,style:{width:"100px"}},r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:e.enhance,disabled:e.requested,className:t.button,style:{minWidth:"0",width:"3.5em",height:"3.5em",borderRadius:"3.5em",position:"relative",top:"35%"}},r.a.createElement("i",{className:"fas fa-magic",style:{fontSize:"2em",color:"#FFFFFF"}}))),r.a.createElement(j.a,{item:!0,xs:5},e.requested&&null===e.enhanced?r.a.createElement("div",{style:{maxWidth:"100%",width:"75%",objectFit:"fill",position:"relative",top:"36.125%"}},r.a.createElement(I.a,null)):r.a.createElement("div",{style:{marginTop:"15%"}},r.a.createElement("img",{id:"enhanced",style:{maxWidth:"100%",minWidth:"75%",objectFit:"fill",position:"relative",top:"50%"},src:e.enhanced,alt:""})))))};var q=function(e){var t=k();return r.a.createElement("div",{style:{height:"".concat(document.getElementById("enhancer").clientHeight,"px"),maxHeight:"75vh"}},r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:"100%",height:"".concat(document.getElementById("enhanced").clientHeight,"px"),objectFit:"fill",position:"relative",top:"50%",padding:"1.5em"},src:e.enhanced,alt:""})),r.a.createElement("div",{style:{paddingTop:"1em"}},r.a.createElement("a",{download:"enhanced-pic.png",href:e.enhanced},r.a.createElement(E.a,{variant:"contained",color:"primary",className:t.button,style:{borderRadius:"3.5em",position:"relative",top:"35%",marginRight:"0",marginTop:"0.75em"}},r.a.createElement("i",{className:"fas fa-arrow-down",style:{color:"#FFFFFF",paddingRight:".5em",fontSize:"1.125em"}}),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))};function N(e){var t=k(),a=r.a.useState(0),n=Object(p.a)(a,2),i=n[0],c=n[1];0===i&&null!==e.image&&c(1);var l=r.a.useState(new Set),o=Object(p.a)(l,2),s=o[0],m=o[1],d=["\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u043e\u0442\u043e","\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u0435 \u043f\u043e\u0440\u0442\u0440\u0435\u0442","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0435"],u=function(e){return s.has(e)};return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{activeStep:i,style:{paddingBottom:"2.25em"}},d.map((function(e,t){var a={},n={};return u(t)&&(a.completed=!1),r.a.createElement(f.a,Object.assign({key:e},a),r.a.createElement(v.a,n,e))}))),function(){switch(i){case 0:return r.a.createElement(y,{image:e.image,setImage:e.setImage});case 1:return r.a.createElement(x,{image:e.image,setCropped:e.setCropped});case 2:return r.a.createElement(O,{cropped:e.cropped,enhance:e.enhance,enhanced:e.enhanced,requested:e.requested});case 3:return r.a.createElement(q,{enhanced:e.enhanced});default:return"Should never happen"}}(),r.a.createElement("br",null),r.a.createElement("div",{style:{textAlign:"right",display:0===i?"none":"block"}},i===d.length-1?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{disabled:0===i,onClick:function(){c((function(e){return e-1}))},className:t.button,style:{display:1===i?"none":"inline"}},r.a.createElement("i",{className:"fas fa-arrow-left",style:{fontSize:"2em"}})),!1,r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){var e=s;u(i)&&(e=new Set(e.values())).delete(i),c((function(e){return e+1})),m(e)},className:t.button,disabled:function(t){switch(t){case 0:return null===e.image;case 1:return null===e.cropped;case 2:return null===e.enhanced;default:return!1}}(i),style:{minWidth:"0",width:"3.5em",height:"3.5em",borderRadius:"3.5em"}},r.a.createElement("i",{className:"fas fa-arrow-right",style:{fontSize:"2em",color:"#FFFFFF"}}))))))}var L=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={image:null,cropped:null,enhanced:null,requested:!1},e.setImage=function(t){e.setState({image:t})},e.setCropped=function(t){e.setState({cropped:t,enhanced:null,requested:!1})},e.enhance=function(){e.setState({requested:!0}),h.a.post("http://127.0.0.1:4158/enhance",{image:e.state.cropped}).then((function(t){void 0!==t.data.error&&(window.alert('\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043d\u0443\u043b "'.concat(t.data.error,'", \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0430\u0432\u0442\u043e\u0440\u043e\u043c')),e.setState({requested:!1})),e.setState({enhanced:t.data.image})})).catch((function(t){window.alert("\u0421\u0435\u0440\u0432\u0435\u0440 offline"),e.setState({requested:!1})}))},e.resetState=function(){e.setState({image:null,cropped:null,enhanced:null,requested:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"App"},r.a.createElement(N,{image:this.state.image,setImage:this.setImage,setCropped:this.setCropped,cropped:this.state.cropped,enhance:this.enhance,enhanced:this.state.enhanced,resetState:this.resetState,requested:this.state.requested}))}}]),a}(n.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.12f4244d.chunk.js.map